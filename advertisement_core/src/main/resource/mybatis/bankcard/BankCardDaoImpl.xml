<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bankCard">

	<resultMap id="bankCardMap" type="BankCard">
		<id property="userId" column="user_id" jdbcType="NUMERIC" />
		<result property="type" column="type" jdbcType="VARCHAR" />
		<result property="cardName" column="card_name" jdbcType="VARCHAR" />
		<result property="userName" column="userName" jdbcType="VARCHAR" />
		<result property="createTime" column="create_time" jdbcType="TIMESTAMP" />
		<result property="cardNumber" column="card_number" jdbcType="VARCHAR" />
	</resultMap>


	<!-- 查询sql -->
	<select id="selectBankCards" parameterType="BankCard" resultMap="bankCardMap">
		select
		* from
		tb_user_bank_card
		<where>
			<trim suffixOverrides="and">
				<if test="userId != null">
					users_id= #{userId} and
				</if>
				<if test="cardName != null">
					card_name= #{cardName} and
				</if>
				<if test="type != null">
					type= #{type} and
				</if>
				<if test="userName != null">
					user_name= #{userName} and
				</if>
				<if test="createTime != null">
					create_time= #{createTime} and
				</if>
				<if test="cardNumber != null">
					card_number= #{cardNumber} and
				</if>
			</trim>
		</where>
		order by create_time desc
	</select>

	<insert id="insertBankCard" parameterType="Product">
		insert into
		tb_product(user_id,user_name,card_name,card_number,type,create_time)
		values
		( #{userId}, #{userName},#{cardName},#{cardNumber}, #{type},sysdate() )
		<selectKey resultType="java.lang.Long" order="AFTER"
				   keyProperty="userId">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>
</mapper>