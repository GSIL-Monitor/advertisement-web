<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="workOrderComment">
	<resultMap id="workOrderCommentMap" type="WorkOrderComment">
		<result property="workOrderCommentId" column="work_order_comment_id" jdbcType="NUMERIC" />
		<result property="workOrderId" column="work_order_id" jdbcType="NUMERIC" />
		<result property="staffId" column="staff_id" jdbcType="NUMERIC" />
		<result property="userCommentTags" column="user_comment_tags" jdbcType="VARCHAR" />
		<result property="orderCommentTags" column="order_comment_tags" jdbcType="VARCHAR" />
		<result property="userSatisfactionLevel" column="user_satisfaction_level" jdbcType="NUMERIC" />
		<result property="orderSatisfactionLevel" column="order_satisfaction_level" jdbcType="NUMERIC" />
		<result property="userInfoEvaluate" column="user_info_evaluate" jdbcType="VARCHAR" />
		<result property="orderInfoEvaluate" column="order_info_evaluate" jdbcType="VARCHAR" />
		<result property="status" column="status" jdbcType="NUMERIC" />
		<result property="createTime" column="create_time" jdbcType="TIMESTAMP" />
		<result property="updateTime" column="update_time" jdbcType="TIMESTAMP" />
	</resultMap>

	<select id="selectWorkOrderComment" parameterType="WorkOrderComment"
		resultMap="workOrderCommentMap">
		select
		* from
		tb_work_order_comment
		<where>
			<trim suffixOverrides="and">
				<if test="workOrderCommentId != null">
					work_order_comment_id=#{workOrderCommentId} and
				</if>
				<if test="workOrderId != null">
					work_order_id=#{workOrderId} and
				</if>
				<if test="staffId != null">
					staff_id=#{staffId} and
				</if>
				<if test="userCommentTags != null">
					user_comment_tags=#{userCommentTags} and
				</if>
				<if test="orderCommentTags != null">
					order_comment_tags=#{orderCommentTags} and
				</if>
				<if test="userSatisfactionLevel != null">
					user_satisfaction_level=#{userSatisfactionLevel} and
				</if>
				<if test="orderSatisfactionLevel != null">
					order_satisfaction_level=#{orderSatisfactionLevel} and
				</if>
				<if test="userInfoEvaluate != null">
					user_info_evaluate=#{userInfoEvaluate} and
				</if>
				<if test="orderInfoEvaluate != null">
					order_info_evaluate=#{orderInfoEvaluate} and
				</if>
				<if test="status != null">
					status = #{status} and
				</if>
			</trim>
			and status != -1
		</where>
		order by create_time desc
	</select>
	
	<select id="selectWorkOrderCommentByWorkOrderIds" parameterType="List"
		resultMap="workOrderCommentMap">
		select
		* from
		tb_work_order_comment
		<where>
			work_order_id in
			<foreach item="id" collection="list" open="(" separator=","
				close=")">
				#{id}
			</foreach>
			order by create_time desc
		</where>
	</select>

	<insert id="insertWorkOrderComment" parameterType="WorkOrderComment">
		insert into
		tb_work_order_comment(work_order_id, staff_id, user_comment_tags,
		order_comment_tags, user_satisfaction_level, order_satisfaction_level,
		user_info_evaluate, order_info_evaluate, status, create_time,
		update_time)
		values
		(#{workOrderId}, #{staffId},
		#{userCommentTags},
		#{orderCommentTags}, #{userSatisfactionLevel},
		#{orderSatisfactionLevel}, #{userInfoEvaluate}, #{orderInfoEvaluate},
		#{status},
		sysdate(),
		sysdate())
	</insert>

	<update id="updateWorkOrderComment" parameterType="WorkOrderComment">
		update tb_work_order_comment
		<set>
			<if test="workOrderId != null">
				work_order_id=#{workOrderId},
			</if>
			<if test="staffId != null">
				staff_id=#{staffId},
			</if>
			<if test="userCommentTags != null">
				user_comment_tags=#{userCommentTags},
			</if>
			<if test="orderCommentTags != null">
				order_comment_tags=#{orderCommentTags},
			</if>
			<if test="userSatisfactionLevel != null">
				user_satisfaction_level=#{userSatisfactionLevel},
			</if>
			<if test="orderSatisfactionLevel != null">
				order_satisfaction_level=#{orderSatisfactionLevel},
			</if>
			<if test="userInfoEvaluate != null">
				user_info_evaluate=#{userInfoEvaluate},
			</if>
			<if test="orderInfoEvaluate != null">
				order_info_evaluate=#{orderInfoEvaluate},
			</if>
			<if test="status != null">
				status=#{status},
			</if>
		</set>
		<where>
			work_order_comment_id=#{workOrderCommentId}
		</where>
	</update>

</mapper>