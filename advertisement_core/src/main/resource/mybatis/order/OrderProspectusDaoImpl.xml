<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="orderProspectus">

	<resultMap id="orderProspectusMap" type="OrderProspectus">
		<result property="orderId" column="order_id" jdbcType="NUMERIC" />
		<result property="suggestion" column="suggestion" jdbcType="VARCHAR" />
		<result property="propertySituation" column="property_situation" jdbcType="NUMERIC" />
		<result property="annualIncome" column="annual_income" jdbcType="NUMERIC" />
		<result property="familyMember" column="family_member" jdbcType="NUMERIC" />
		<result property="badHabit" column="bad_habit" jdbcType="NUMERIC" />
		<result property="occupation" column="occupation" jdbcType="NUMERIC" />
		<result property="score" column="score" jdbcType="NUMERIC" />
		<result property="words" column="words" jdbcType="VARCHAR" />
		<result property="status" column="status" jdbcType="NUMERIC" />
		<result property="createTime" column="create_time" jdbcType="TIMESTAMP" />
		<result property="updateTime" column="update_time" jdbcType="TIMESTAMP" />
	</resultMap>

	<!-- 查询sql -->
	<select id="selectOrderProspectuss" parameterType="OrderProspectus"
		resultMap="orderProspectusMap">
		select
		* from
		tb_order_prospectus
		<where>
			<trim suffixOverrides="and">
				<if test="orderId != null">
					order_id= #{orderId} and
				</if>
				<if test="suggestion != null">
					suggestion= #{suggestion} and
				</if>
				<if test="propertySituation != null">
					property_situation= #{propertySituation} and
				</if>
				<if test="annualIncome != null">
					annual_income= #{annualIncome} and
				</if>
				<if test="familyMember != null">
					family_member= #{familyMember} and
				</if>
				<if test="badHabit != null">
					bad_habit= #{badHabit} and
				</if>
				<if test="occupation != null">
					occupation= #{occupation} and
				</if>
				<if test="score != null">
					score= #{score} and
				</if>
				<if test="words != null">
					words= #{words} and
				</if>
				<if test="status != null">
					status= #{status} and
				</if>
			</trim>
			and status != -1
		</where>
		order by create_time desc
	</select>

	<select id="selectOrderProspectusByIds" parameterType="List"
		resultMap="orderProspectusMap">
		select
		* from
		tb_order_prospectus
		<where>
			order_id in
			<foreach item="id" collection="list" open="(" separator=","
				close=")">
				#{id}
			</foreach>
		</where>
	</select>

	<insert id="insertOrderProspectus" parameterType="OrderProspectus">
		insert into
		tb_order_prospectus( order_id, suggestion, property_situation,
		annual_income, family_member, bad_habit, occupation, score, words, status,
		create_time, update_time )
		values
		( #{orderId}, #{suggestion},
		#{propertySituation}, #{annualIncome}, #{familyMember}, #{badHabit},
		#{occupation}, #{score}, #{words}, #{status}, sysdate(), sysdate() )
	</insert>

	<update id="updateOrderProspectus" parameterType="OrderProspectus">
		update tb_order_prospectus
		<set>
			<trim suffixOverrides=",">
				<if test="suggestion != null">
					suggestion= #{suggestion},
				</if>
				<if test="propertySituation != null">
					property_situation= #{propertySituation},
				</if>
				<if test="annualIncome != null">
					annual_income= #{annualIncome},
				</if>
				<if test="familyMember != null">
					family_member= #{familyMember},
				</if>
				<if test="badHabit != null">
					bad_habit= #{badHabit},
				</if>
				<if test="occupation != null">
					occupation= #{occupation},
				</if>
				<if test="score != null">
					score= #{score},
				</if>
				<if test="words != null">
					words= #{words},
				</if>
				<if test="status != null">
					status= #{status},
				</if>
				update_time=sysdate(),
			</trim>
		</set>
		<where>
			order_id=#{orderId}
		</where>
	</update>

	<delete id="deleteOrderProspectus" parameterType="long">
		delete from
		tb_order_prospectus
		where
		order_id=#{orderId}
	</delete>

</mapper>